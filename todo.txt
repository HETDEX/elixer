
Update ifu.IFU() constructor to make use of rsp1 output ...
    + may need to call rsp1 manually (since the output is per detection, not per ifu and it
        performs fiber normalization)
    + would be useful if fibers (spectra per fiber) flux calibrated on its own (maybe in extra
        fits payload in multi_* files?)




** photo/imaging catalogs
	- need more spring coverage (GOODS-N, etc) : 
		(spring ~ RA: 160 - 230, Dec: 45 - 56)
		[CFHTLS: 208-220;51-57]
		
	- need more fall coverage:


** Test cases ...
   look over prior runs and piece together representatitve cases
   * per catalog
     - no targets
     - 3 or fewer
     - more than 3
   save as a single line file (pull full lines from t5cut and stitch together in a single file)


* make master_cutout larger than initially needed (crop down to display to needed extent),
so can use as base if fiber positions are too spread out




* add option in svoltron.py for:
     select queue (gpu or vis?)
     parameteric file name ?

* for multi-page view, see if can figure that out early and set the first page with blanks so is
  the same size as a single page (makes scanning through images less jerky)
  - maybe always plot (with colored squares) all hits, but have the second line empty (with note
    saying pages to follow)

* Combine emission line detections:
scan detections for a given IFU (hd object) and try to match up (that is, find detections that belong
to a single object and combine .... display the list of detect IDs and line #'s in the top line
of the report).
   - conditions to meet for any two detections to be the same object:
   1. must share at least one fiber
   2. must be within 1" (maybe 1.5"?)
   3. summed 1D spectra of each must have similar peaks? (same peaks +/- at most 5.7AA ... note that
   some peaks may be stronger/weaker depedning on where fibers fall)
   >> Todo: need a way to really identify peaks (there may be something in astropy)
   >> Todo: how to logically merge?? pick one as the base and add the fibers from the other (so can get
            more than 5 fibers ... but do not duplicate the common fibers (that is, do not add the same
            fibers that they share)
   >> Todo: then pick the strongest (counts or S/N) peak as the yellow highlight ?? and make the
            cut outs from that one
   >> Todo: optional? also color highlight (not yellow) the other peaks, so would need to keep a list
            of the other emis detects (or a list of the relevant data elements)
   >> Todo: new member variable that says whether this emis obj is a Primary (and should be printed)
            or a secondary and will not be printed


* incorporate and expand Andrew Bayesian LAE v OII.
  -- expand to include other data in priors (maybe from photometric image matching (its PDF), or
     more HETDEX spectral data ... e.g. goodness of peaks and goodness (likelihood) of other
     contributing lines), line flux (measured), EW (estimate?))
     Also, distance to photo source and flux of source in comparable range to
     HETDEX. (I.e if really bright but HETDEX is weak then not it ... needs
     calibrated flux from hetdex
  -- this should be independent of standard voltron (that is, treat like a subpackage or different package)
     --need a way to call without voltron objects (i.e. spectra can be just an array of counts, but
       need a way to quantify other data (like catalog image objects, etc)
  --

* Peak finder
  -- scan the combined spectra and look for (other) peaks (ie. part of * Combined emission line detections)

* Pop III signature finder
  Could be made more general with different (known) object types by matching a template(s) for each based on
    line locations, widths, and heights (or relative strengths)
  -- specifically for Pop III .... look for strong LyA + clear [HeII] and absence of [CIV] (maybe absence of other
  lines also ... MgII, etc).
  -- needs peak finder
  -- needs LAE/OII probabilty (as LyA - HeII similar to OII - OIII)



Done:

** Add CHFTLS ?? as new catalog (overlaps with CANDLES_EGS) or as supplement to CANDLES_EGS?
-- if suplement, need extra set of max, min RA, DEC (if not found in original set, check these)
    -- bascially, if outside range OR if no matching targets? check the other
-- if its own, what to do if hits in both?
   -- same hits or different?
   -- single page (extra rows?)
--probably the first approach is overall simpler and will produce more what is expected in output

* name: HIVES (Hetdex Image matching and Visualization of Emission Sources) [no: leave as voltron]

* add ground-based imaging catalog (see http://terapix.iap.fr/article.php?id_article=586 ) [CFHTLS]
